<!DOCTYPE html>
<html>

<head>

    <meta charset= ”utf-8”>
    <title>TP login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="TPpage1.css" />
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>

</head>

<body>
    <div id="total">

        <!--
 _   _            ______            
| \ | |           | ___ \           
|  \| | __ ___   _| |_/ / __ _ _ __ 
| . ` |/ _` \ \ / / ___ \/ _` | '__|
| |\  | (_| |\ V /| |_/ / (_| | |   
\_| \_/\__,_| \_/ \____/ \__,_|_|   
                                    
                                    
-->

        <ul class="nav justify-content-center">
            <li class="nav-item">
                <a class="nav-link" href="#">
                    <p id="Connect">Connection</p>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="Inscrip" href="#">
                    <p>Inscription</p>
                </a>
            </li>
        </ul>

        <!--
 _____                             _   _             
/  __ \                           | | (_)            
| /  \/ ___  _ __  _ __   ___  ___| |_ _  ___  _ __  
| |    / _ \| '_ \| '_ \ / _ \/ __| __| |/ _ \| '_ \ 
| \__/\ (_) | | | | | | |  __/ (__| |_| | (_) | | | |
 \____/\___/|_| |_|_| |_|\___|\___|\__|_|\___/|_| |_|
                                                     
                                                     
-->

        <div id="Connection">
            <h1> Connection </h1>
            <br>
            <form id="ConnectForm">
                <p>Pseudo ou E-mail :
                    <input type="text" id="pseudo" class="Form-Connect" />
                </p>
                <br>
                <p>Mdp :
                    <input type="password" id="mdp" class="Form-Connect" />
                </p>
                <br>
                <a href="image/cookies.jpg">
                    <p>en vous connectant a ce site vous accepter ces règles et ces cookies</p>
                </a>
                <br>
                <button class="btn btn-success Btn-Connect" type="submit">Valider</button>
            </form>
            <br>
        </div>

        <!--
 _____                    _       _   _             
|_   _|                  (_)     | | (_)            
  | | _ __  ___  ___ _ __ _ _ __ | |_ _  ___  _ __  
  | || '_ \/ __|/ __| '__| | '_ \| __| |/ _ \| '_ \ 
 _| || | | \__ \ (__| |  | | |_) | |_| | (_) | | | |
 \___/_| |_|___/\___|_|  |_| .__/ \__|_|\___/|_| |_|
                           | |                      
                           |_|                      
-->

        <div id="Inscription">
            <h1> Inscription </h1>
            <br>
            <form id="RegisterForm">
                <p>Pseudo :
                    <input type="text" id="pseudo2" class="Form-Register" />
                </p>
                <br>
                <p>E-mail :
                    <input type="email" id="e-mail2" class="Form-Register" />
                </p>
                <br>
                <p>Mdp :
                    <input type="password" id="mdp2" class="Form-Register" />
                </p>
                <br>
                <p>valider le Mdp :
                    <input type="password" id="vald-mdp2" class="Form-Register" />
                </p>
                <br>
                <a href="image/cookies.jpg">
                    <p>en vous connectant a ce site vous accepter ces règles et ces cookies</p>
                </a>
                <br>
                <button class="btn btn-success Btn-Register" type="submit">Valider</button>
            </form>
            <br>
        </div>

    </div>

<div id="page-principal">
    <!--
     _                             _            _             _
    | |                           (_)          (_)           | |
    | |__   __ _ _ __   _ __  _ __ _ _ __   ___ _ _ __   __ _| |
    | '_ \ / _` | '__| | '_ \| '__| | '_ \ / __| | '_ \ / _` | |
    | |_) | (_| | |    | |_) | |  | | | | | (__| | |_) | (_| | |
    |_.__/ \__,_|_|    | .__/|_|  |_|_| |_|\___|_| .__/ \__,_|_|
                       | |                       | |
                       |_|                       |_|
    -->
    <div class="bar-haut">
        <div>

        </div>
    </div>
    <!--
                 _                                     _            _             _
                | |                                   (_)          (_)           | |
    ___ ___  _ __ | |_ ___ _ __  _   _  ___   _ __  _ __ _ _ __   ___ _ _ __   __ _| |
    / __/ _ \| '_ \| __/ _ \ '_ \| | | |/ _ \ | '_ \| '__| | '_ \ / __| | '_ \ / _` | |
    | (_| (_) | | | | ||  __/ | | | |_| |  __/ | |_) | |  | | | | | (__| | |_) | (_| | |
    \___\___/|_| |_|\__\___|_| |_|\__,_|\___| | .__/|_|  |_|_| |_|\___|_| .__/ \__,_|_|
                                           | |                       | |
                                           |_|                       |_|
    -->
    <div class="bar-img-txt">

        <!--
    _                                               _       _
    | |                                             | |     (_)
    | |__   __ _ _ __   ___  ___  ___ ___  _ __   __| | __ _ _ _ __ ___
    | '_ \ / _` | '__| / __|/ _ \/ __/ _ \| '_ \ / _` |/ _` | | '__/ _ \
    | |_) | (_| | |    \__ \  __/ (_| (_) | | | | (_| | (_| | | | |  __/
    |_.__/ \__,_|_|    |___/\___|\___\___/|_| |_|\__,_|\__,_|_|_|  \___|


    -->

        <div class="bar-haut-2">
            <div class="new-post">
                <input type="submit" value="new Post" />
            </div>

            <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="found" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Chercher</button>
            </form>
        </div>
        <!--
     _                            _        _
    (_)                          | |      | |
     _ _ __ ___   __ _   ______  | |___  _| |_
    | | '_ ` _ \ / _` | |______| | __\ \/ / __|
    | | | | | | | (_| |          | |_ >  <| |_
    |_|_| |_| |_|\__, |           \__/_/\_\\__|
                  __/ |
                 |___/
    -->
        <div class="img-txt">

        </div>

    </div>

</div>
    <!--
     _____           _       _
    /  ___|         (_)     | |
    \ `--.  ___ _ __ _ _ __ | |_
     `--. \/ __| '__| | '_ \| __|
    /\__/ / (__| |  | | |_) | |_
    \____/ \___|_|  |_| .__/ \__|
                      | |
                      |_|
    -->

    <script>
        $(window).ready(function() {

            var locallogin
            var RegPseudo
            var RegEmail
            var RegMdp

            if (!localStorage.getItem("Users")) {
                locallogin = {
                    users: []
                }
            } else {
                locallogin = JSON.parse(localStorage.getItem("Users"))
            }

            $('#Inscrip').click(function(event) {
                event.preventDefault()
                $('#Connection').hide()
                $('#Inscription').show()
            });

            $('#ConnectForm').click(function(event) {
                event.preventDefault()
                $('#Connection').show()
                $('#Inscription').hide()
            });

            /*
                        
            ______           _     _            
            | ___ \         (_)   | |           
            | |_/ /___  __ _ _ ___| |_ ___ _ __ 
            |    // _ \/ _` | / __| __/ _ \ '__|
            | |\ \  __/ (_| | \__ \ ||  __/ |   
            \_| \_\___|\__, |_|___/\__\___|_|   
                        __/ |                   
                       |___/                    
            */

            $("#RegisterForm").submit(function(event) {
                event.preventDefault()

                if ($("#pseudo2").val() == "" || $('#pseudo2').val().length < 8) {
                    alert("remplisser correctement le champ pseudo (Plus de 8 character)")
                } else if ($("#e-mail2").val() == "") {
                    alert("remplisser correctement le champ E-mail")
                } else if (($("#mdp2").val() == "" || $("#mdp2").val().length < 8) && $("#valid-mdp2").val() == $("#mdp2").val()) {
                    alert("remplisser correctement le champ mdp (Plus de 8 character)")
                } else {
                    let PseudoExist = false
                    let EmailExist = false

                    let x
                    for (x in locallogin.users) {
                        var actualuser = locallogin.users[x]
                        if (actualuser.pseudo == $("#pseudo2").val()) {
                            PseudoExist = true
                            alert("Pseudo already exist")
                            break;
                        }
                        if (actualuser.email == $("#e-mail2").val()) {
                            EmailExist = true
                            alert("email already exist")
                            break;
                        }
                    }

                    if (PseudoExist == false && EmailExist == false) {
                        RegPseudo = $("#pseudo2").val()
                        RegEmail = $("#e-mail2").val()
                        RegMdp = $("#mdp2").val()

                        var NewUser = {
                            pseudo: RegPseudo,
                            email: RegEmail,
                            mdp: RegMdp,
                        }

                        locallogin.users.push(NewUser)
                        localStorage.setItem("Users", JSON.stringify(locallogin))
                    }
                }
            })
            /*            
                        
             _             _       
            | |           (_)      
            | | ___   __ _ _ _ __  
            | |/ _ \ / _` | | '_ \ 
            | | (_) | (_| | | | | |
            |_|\___/ \__, |_|_| |_|
                      __/ |        
                     |___/         
            */

            $("#ConnectForm").submit(function(event) {
                    event.preventDefault()

                    let login = false

                    let x
                    for (x in [] users) {
                        let actualUser = users[x]
                        if (users.email == $("#pseudo").val()) {
                            if (users.mdp == $("#mdp").val()) {
                                login = true
                                break;
                            }
                        }
                        if (users.pseudo == $("#pseudo").val()) {
                            if (users.mdp == $("#mdp").val()) {
                                login = true
                                break;
                            }
                        }
                    }
                    if (login == true) {
                        alert("bienvenue")
                    } else {
                        alert("mdp ou pseudo incorect")
                    }
                })
         })
    </script>
</body></html>
